---
title: "Status of childhood immunization"
date: "September 2025"
date-format: "MMMM YYYY"
format:
   typst:
      template-partials:
         - typst-template.typ
         - typst-show.typ
      keep-typ: true
params:
   state: "Hawaii"
   end_date: "August 7, 2025"
execute:
  echo: false
  message: false
  warning: false
  fig-align: center
---

```{r}
#| output: false
library(tidyverse)
library(glue)
library(tigris)
library(sf)
library(janitor)
library(tidycensus)
library(showtext)

source("charts.R")

state <- params$state
if (is.null(state)) {
    state <- "Hawaii" # Default (same in typst template)
}
state_title <- gsub(" Of ", " of ", str_to_title(state))

census_api_key(Sys.getenv("TIDYCENSUS_API_KEY"), install = FALSE)

total_measles_cases <- read_csv(
    "https://raw.githubusercontent.com/rfortherestofus/state-immunization-data/refs/heads/main/data-clean/total_measles_cases.csv"
)

mmr_coverage_final <- read_csv(
    "https://raw.githubusercontent.com/rfortherestofus/state-immunization-data/refs/heads/main/data-clean/mmr_coverage_final.csv"
)

dtap_coverage_final <- read_csv(
    "https://raw.githubusercontent.com/rfortherestofus/state-immunization-data/refs/heads/main/data-clean/dtap_coverage_final.csv"
)

us_states <- states() |>
    clean_names() |>
    select(name) |>
    filter(!name %in% c("Commonwealth of the Northern Mariana Islands", 
                        "American Samoa", 
                        "United States Virgin Islands"))

population_by_state <-
    get_decennial(
        geography = "state",
        variables = "P1_001N", # Total population variable
        year = 2020,
        survey = "pl" # PL 94-171 Redistricting Data
    ) |>
    select(NAME, value) |>
    rename(
        state = NAME,
        total_population = value
    ) |>
    arrange(desc(total_population))

df <- left_join(us_states, total_measles_cases, by = c("name" = "state"))

df_mmr_coverage_final <- mmr_coverage_final |>
    select(geography, school_year, estimate_percent) |>
    filter(school_year == "2024-25")

df_mmr <- left_join(
    df_mmr_coverage_final,
    population_by_state,
    by = c("geography" = "state")
)

mmr_line_df <- mmr_coverage_final |>
    select(geography, school_year, estimate_percent)

df_dtap_coverage_final <- dtap_coverage_final |>
    select(geography, year, estimate_percent) |>
    filter(year == "2023")

df_dtap <- left_join(
    df_dtap_coverage_final,
    population_by_state,
    by = c("geography" = "state")
)

dtap_line_df <- dtap_coverage_final |>
    select(geography, year, estimate_percent)
```

```{r}
#| output: asis
print(glue(
    "This brief illustrates the current status of childhood immunization in {state_title} and is intended to inform state-level policy decisions and priorities. Takeaways include:"
))
cat("\n\n")
cat(
    glue(
        "- State-level immunization coverage in {state_title} for key childhood vaccines, such as DTaP and MMR, is above national averages.\n\n"
    ),
    glue(
        "- {state_title}'s non-medical exemption rate among kindergartners is lower than the U.S. median.\n\n"
    ),
    glue(
        "- State-level per capita public health spending is higher than the national average.\n\n"
    ),
    glue(
        "- {state_title} has had relatively low levels of measles transmission in 2025."
    )
)
```

```{=typst} 
#blueline()
```

## Vaccination coverage

```{=typst}
#v(3pt)
```

```{r}
#| output: asis
print(glue(
    "Maintaining sufficient vaccination coverage is critical for establishing community protection. The charts below demonstrate how coverage for two critical vaccines has changed over time in {state_title} and how it compares to neighboring states, national averages, and Healthy People 2030 (HP2030) targets."
))
```


<div style="background-color: #F8F8F8;">

```{=typst}
#chart-title("Proportion of 2-year-olds fully protected with DTaP vaccines")
```

::: {layout="[[1,1]]"}

```{r}
dtap_line_df |> dtap_vaccination_over_time_chart_lollipop(state_title)
```

```{r}
df_dtap |> dtap_vaccination_comparison_chart(df, state_title)
```

:::

```{r}
text_content <- glue(
    "In 2023, fewer two-year-olds were fully vaccinated against diphtheria, tetanus, and pertussis (received all four doses of DTaP) in {state_title} compared to the previous year. {state_title} has higher coverage than the US median and higher coverage than neighboring states. Coverage in {state_title} is below the HP2030 target of 90%."
)
```

```{=typst}
#box(inset: 10pt)[
  #text("`r text_content`")
  #source("Source: ChildVaxView")
]
```

</div>

```{=typst} 
#pagebreak()
```

<div style="background-color: #F8F8F8;">

```{=typst}
#chart-title("Proportion of kindergartners protected with MMR vaccines")
```

::: {layout="[[1,1]]"}

```{r}
mmr_line_df |> mmr_vaccination_over_time_chart_lollipop(state_title)
```


```{r}
df_mmr |> mmr_vaccination_comparison_chart(df, state_title)
```

:::

```{r}
text_content <- glue(
    "In 2023, the same proportion of kindergarteners received at least 1 dose of measles, mumps, and rubella (MMR) vaccine in {state_title} compared to the previous year. {state_title} has higher coverage than the US median and higher coverage than neighboring states. Coverage in {state_title} exceeds the HP2030 target of 95%."
)
```

```{=typst}
#box(inset: 10pt)[
  #text("`r text_content`")
  #source("Source: SchoolVaxView")
]
```

</div>

```{=typst} 
#blueline()
```

## Vaccination exemptions

```{=typst}
#box(inset: 10pt)[
  Many states allow children attending public school to receive vaccination exemptions for religious reasons or for personal reasons, sometimes referred to as "philosophical exemptions". Higher rates of non-medical exemptions have been linked with increased disease transmission.
]
```

<div style="background-color: #F8F8F8;">

```{=typst}
```

```{r}
first_box <- "NO"
second_box <- "YES"
third_box <- "2%"
fourth_box <- "4%"
text_content <- glue(
    "{state_title}'s rate of non-medical exemptions among kindergartners during the 2024-25 school year is a slight increase from the state's 2023-24 rate."
)
```

```{=typst}
#box(
  inset: 1em,
  [
    #grid(
      columns: (1fr, 1fr, 1fr, 1fr),
      gutter: 1em,
      [#status-boxes(top-text: "Allows personal exemptions?", bottom-text: "`r first_box`")],
      [#status-boxes(top-text: "Allows religious exemptions?", bottom-text: "`r second_box`")],
      [#status-boxes(top-text: "Non-medical exemptions — state", bottom-text: "`r third_box`")],
      [#status-boxes(top-text: "Non-medical exemptions — US median", bottom-text: "`r fourth_box`")]
    )
  ]
)
#box(inset: 10pt)[
  #text("`r text_content`") \ \
  #text(weight: "bold")[Additional details on exemption requirements:] \
  A child's parent or guardian may request an exemption in writing for medical or religious  reasons. The exemption does not apply during an emergency or epidemic of disease.
  #source("Source: NCSL, SchoolVaxView")
]
```

</div>

```{=typst}
#pagebreak()
#blueline()
```

## PUBLIC HEALTH SPENDING

<div style="background-color: #F8F8F8;">

```{r}
left_box <- "$210"
right_box <- "$124"
text_content <- glue(
    "Low levels of public health spending are thought to contribute to suboptimal immunization rates. Nationally, {state_title} ranks 4th in public health spending."
)
```

```{=typst}
#box(inset: 10pt)[
  #grid(
    columns: (70%, 1fr),
    column-gutter: 8pt,
    align: horizon,
    [#text("`r text_content`")],

    stack(
      dir: ttb,
      spacing: 6pt,
      align(center + horizon)[
        #text(weight: "bold", size: 10pt)[State dollars dedicated to public health per capita (2022-23)]
      ],
      grid(
        columns: (auto, auto, auto),
        column-gutter: 12pt,
        row-gutter: 6pt,
        align(center + horizon)[State],
        [],
        align(center + horizon)[National],
        ..connected-boxes(text1: "$210", text2: "$124")
      )
    )
  )
  #source("Source: America's Health Rankings")
]
```

</div>

```{=typst} 
#blueline()
```

## UNIVERSAL VACCINE PURCHASING

<div style="background-color: #F8F8F8;">

```{r}
fourth_box <- "4%"
```

```{=typst}
#box(inset: 10pt)[
  #grid(
    columns: (70%, 1fr),
    column-gutter: 20pt,
    align: horizon,
    [In states with Universal Purchase programs, the state government purchases all recommended vaccines for all children, regardless of insurance status. These initiatives can help to address disparities in vaccine coverage and support equitable vaccine access.],
    status-boxes(top-text: "Universal Purchaser?", bottom-text: "`r fourth_box`")
  )
  #source("Source: AIM")
]
```

</div>

```{=typst} 
#blueline()
```

## SUPPORT FOR IMMUNIZATION

Strong policy commitment to immunization is critical for effective vaccination programs. The state legislature has recently introduced several bills that would affect state-wide childhood vaccination, a selection of which are described below. The arrows below indicate whether these bills would strengthen (↑) or weaken (↓) vaccine safety nets.

<div style="background-color: #F8F8F8;">

```{=typst}
#box(inset: 10pt)[
  - HB1315 (enacted) – Broadens pharmacists' immunization roles and mandates health insurers cover all CDC-recommended childhood vaccinations.

  - HB974 (enacted): Authorizes the health commissioner to establish regulations requiring health insurers to cover all vaccines recommended by the Advisory Committee on Immunization Practices (ACIP)

  - SB821/HB608 (proposed) – Would extend the temporary school admission period for students lacking required immunizations from 20 to 60 days.
  
  #source("Source: AIM, LegiScan")
]
```

</div>

```{=typst} 
#pagebreak()
#blueline()
```

## DISEASE STATUS

```{r}
#| output: asis
print(glue(
    "Measles outbreaks can indicate insufficient vaccination coverage within a population. Disease may spread across state borders when vaccine coverage is low. The map below visualizes the number of measles cases reported in {state_title} and neighboring states between January 1, 2025, and {params$end_date}."
))
```

<div style="background-color: #F8F8F8;">

```{r}
#| fig-height: 4
#| fig-width: 10
df |> measles_map(state_title)
```

</div>

```{=typst} 
#box(
  inset: 1em,
  fill: rgb("#002D72"),
  [
    #grid(
      columns: (1fr, 10fr),
      gutter: 0.1em,
      align: horizon,
      [#image("assets/coins.svg")],
      [#text(
        font: "Gentona",
        size: 11pt,
        fill: white
      )[Vaccines can help prevent expensive disease outbreaks. A 2018–19 measles outbreak in Washington was estimated to cost #text(fill: rgb("#f1c400"))[US\$47,479] per case for both direct medical and public health response expenses.]]
    )
    #place(
      bottom + right,
      dy: 3pt,
      source(color: white, "Source: Pike, 2022")
    )
  ]
)
```

```{=typst} 
#blueline()
```

## DATA SOURCES

```{=typst}
#show list: set block(spacing: 0.5em) // reduce line height
#set text(size: 9pt) // reduce all text font size
```

Vaccination coverage:

- DTaP: CDC, ChildVaxView Interactive! https://www.cdc.gov/childvaxview/about/interactive-reports.html. DTaP, ≥ 4 Doses, States/Local Areas, Birth Years/Cohorts 2017–2021, Age 24 months. Updated Aug 2024. 
MMR: CDC, SchoolVaxView Interactive! https://www.cdc.gov/schoolvaxview/data/index.html. MMR, States, School Years 2021-22, 2022-23, 2023-24, 2024-25. Updated July 2025.

Vaccination exemptions:

- Status: NCSL, State Non-Medical Exemptions From School Immunization Requirements. https://www.ncsl.org/health/state-non-medical-exemptions-from-school-immunization-requirements. Updated July 2025.
Rates: CDC, SchoolVaxView Interactive! https://www.cdc.gov/schoolvaxview/data/index.html. Exemption – Non-Medical Exemption, States, School Years 2023-24 and 2024-25. Updated July 2025.

Public health spending:

- Public Health Funding in United States, America's Health Rankings, United Health Foundation. https://www.americashealthrankings.org/explore/measures/PH_funding. Accessed July 2025.

Universal vaccine purchasing:

- Association of Immunization Managers, Policy Maps – Universal Vaccine Purchase Program. https://www.immunizationmanagers.org/resources/aim-policy-maps/. Updated April 2025.

Support for immunization:

- Association of Immunization Managers, Legislative Round-ups. https://www.immunizationmanagers.org/resources-toolkits/immunization-program-policy-toolkit/legislative-round-ups/. 
LegiScan. https://legiscan.com/. Accessed July 2025.

Disease status:

- International Vaccine Access Center, U.S. Measles Tracker. https://publichealth.jhu.edu/ivac/resources/us-measles-tracker. Accessed July 22, 2025.

Measles outbreak cost:

- Pike J, Melnick A, Gastañaduy PA, et al. Societal Costs of a Measles Outbreak. Pediatrics. 2021;147(4):e2020027037. doi:10.1542/peds.2020-027037

*Note: The high-level data included in this report do not reflect statewide variation in vaccination coverage or disease status. Further, state reporting policies may limit data completeness. For any data-related questions, please contact ivac@jh.edu.*
